import{L as C}from"./Layout.bbd8c550.js";import{r as h,f as b}from"./translation.6e7fee71.js";import{r as y,c as f,o as F,a as s,b as g,d as k,w as o,e as U,f as n,g as r,i as c,t as u,u as v,z as w,j}from"./index.b127c03b.js";import{f as D}from"./index.bc9575af.js";const A=n("h2",{class:"display-2"},[c("\u662F\u9B5A\u554A "),n("span",{class:"sp-font"},"Fish")],-1),O=c(" \u8ACB\u901A\u77E5\u7DB2\u7AD9\u7BA1\u7406\u54E1 "),R={key:1,class:"flex"},W={class:"filter-list layout gutter--md"},$={class:"row"},q={class:"flex xs11 sm6"},G={class:"flex xs12 sm5"},H={class:"data-list"},I={colspan:"8"},Y={__name:"FishView",setup(J){const p=y({isError:!1,errorMsg:""}),a=y({list:[],keyword:"",result:f(()=>a.rarity.value==="all"?a.list:a.list.filter(t=>t.availability.rarity===a.rarity.value)),rarity:{text:"\u5168\u90E8",value:"all"},options:f(()=>{const t=[];return Object.entries(h).forEach(([l,m])=>{const d={text:m,value:l};t.push(d)}),t.unshift({text:"\u5168\u90E8",value:"all"}),t})}),x=[{key:"icon_uri",label:"\u5716\u7247",name:"image"},{key:"name.name-TWzh",label:"\u4E2D\u6587\u540D\u7A31"},{key:"availability.location",label:"\u51FA\u73FE\u5730\u9EDE",name:"location"},{key:"availability.rarity",label:"\u7A00\u6709\u5EA6",name:"rarity"},{key:"availability.time",label:"\u51FA\u73FE\u6642\u9593",name:"showTime",sortable:!0},{key:"availability.month-northern",label:"\u5317\u534A\u7403\u6708\u4EFD",name:"showNorth",sortable:!0},{key:"availability.month-southern",label:"\u5357\u534A\u7403\u6708\u4EFD",name:"showSouth",sortable:!0},{key:"price",label:"\u50F9\u683C",sortable:!0,sortingFn:(t,l)=>t-l}],i=y({current:1,perSize:15,total:f(()=>{const t=a.result.length;return t>0?Math.ceil(t/i.perSize):1})});F(()=>{D("fish").then(t=>{a.list=t}).catch(t=>{p.isError=!0,p.errorMsg=`${t.statusText}`,console.error(t)})});const V=t=>{a.rarity=t.value,i.current=1};function z(t){return h[t]?h[t]:t}function T(t){return b[t]?b[t]:t}return(t,l)=>{const m=s("va-alert"),d=s("va-input"),M=s("va-select"),S=s("va-progress-circle"),E=s("va-image"),_=s("va-chip"),L=s("va-pagination"),N=s("va-data-table"),B=s("va-backtop");return g(),k(C,null,{title:o(()=>[A]),default:o(()=>[p.isError?(g(),k(m,{key:0,color:"warning",title:p.errorMsg,icon:"info",class:"mb-4"},{default:o(()=>[O]),_:1},8,["title"])):(g(),U("div",R,[n("div",W,[n("div",$,[n("div",q,[r(d,{placeholder:"\u540D\u7A31\u95DC\u9375\u5B57\u641C\u5C0B...",modelValue:a.keyword,"onUpdate:modelValue":l[0]||(l[0]=e=>a.keyword=e)},null,8,["modelValue"])]),n("div",G,[r(M,{label:"\u7A00\u6709\u5EA6","onUpdate:modelValue":[V,l[1]||(l[1]=e=>a.rarity=e)],modelValue:a.rarity,options:a.options},null,8,["modelValue","options"])])])]),n("div",H,[r(N,{striped:"","sticky-header":"",height:"500px",items:a.result,columns:x,"per-page":i.perSize,"current-page":i.current,filter:a.keyword},{"cell(image)":o(({value:e})=>[r(E,{src:e,style:{width:"70px"}},{loader:o(()=>[r(S,{indeterminate:""})]),_:2},1032,["src"])]),"cell(location)":o(({value:e})=>[c(u(T(e)),1)]),"cell(rarity)":o(({value:e})=>[c(u(z(e)),1)]),"cell(showTime)":o(({value:e})=>[r(_,{size:"small",outline:!e.length>0},{default:o(()=>[c(u(e.length>0?e:"\u6574\u5929\u90FD\u6709"),1)]),_:2},1032,["outline"])]),"cell(showNorth)":o(({value:e})=>[r(_,{size:"small",outline:!e.length>0},{default:o(()=>[c(u(v(w)(e)),1)]),_:2},1032,["outline"])]),"cell(showSouth)":o(({value:e})=>[r(_,{size:"small",outline:!e.length>0},{default:o(()=>[c(u(v(w)(e)),1)]),_:2},1032,["outline"])]),bodyAppend:o(()=>[n("tr",null,[n("td",I,[r(L,{modelValue:i.current,"onUpdate:modelValue":l[2]||(l[2]=e=>i.current=e),input:"",pages:i.total},null,8,["modelValue","pages"])])])]),_:1},8,["items","per-page","current-page","filter"]),r(B,{onClick:v(j)},null,8,["onClick"])])]))]),_:1})}}};export{Y as default};
