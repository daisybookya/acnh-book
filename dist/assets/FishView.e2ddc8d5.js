import{L as C}from"./Layout.cb38ea6c.js";import{r as h,f as g}from"./translation.6e7fee71.js";import{r as y,c as f,o as F,a as n,b as v,d as k,w as o,e as U,f as l,g as r,i,t as u,u as b,y as w,j}from"./index.ab3906d5.js";import{f as D}from"./index.bc9575af.js";const A=l("h2",{class:"display-2"},[i("\u662F\u9B5A\u554A "),l("span",{class:"sp-font"},"Fish")],-1),O=i(" \u8ACB\u901A\u77E5\u7DB2\u7AD9\u7BA1\u7406\u54E1 "),R={key:1,class:"flex"},W={class:"filter-list layout gutter--md"},$={class:"row"},q={class:"flex xs5 md6"},G={class:"item"},H=i(" \u641C\u5C0B\uFF1A "),I={class:"flex xs5 md6"},J={class:"item"},K={class:"data-list"},P={colspan:"8"},et={__name:"FishView",setup(Q){const d=y({isError:!1,errorMsg:""}),a=y({list:[],keyword:"",result:f(()=>a.rarity.value==="all"?a.list:a.list.filter(t=>t.availability.rarity===a.rarity.value)),rarity:{text:"\u5168\u90E8",value:"all"},options:f(()=>{const t=[];return Object.entries(h).forEach(([s,m])=>{const p={text:m,value:s};t.push(p)}),t.unshift({text:"\u5168\u90E8",value:"all"}),t})}),x=[{key:"icon_uri",label:"\u5716\u7247",name:"image"},{key:"name.name-TWzh",label:"\u4E2D\u6587\u540D\u7A31"},{key:"availability.location",label:"\u51FA\u73FE\u5730\u9EDE",name:"location"},{key:"availability.rarity",label:"\u7A00\u6709\u5EA6",name:"rarity"},{key:"availability.time",label:"\u51FA\u73FE\u6642\u9593",name:"showTime",sortable:!0},{key:"availability.month-northern",label:"\u5317\u534A\u7403\u6708\u4EFD",name:"showNorth",sortable:!0},{key:"availability.month-southern",label:"\u5357\u534A\u7403\u6708\u4EFD",name:"showSouth",sortable:!0},{key:"price",label:"\u50F9\u683C",sortable:!0,sortingFn:(t,s)=>t-s}],c=y({current:1,perSize:15,total:f(()=>{const t=a.result.length;return t>0?Math.ceil(t/c.perSize):1})});F(()=>{D("fish").then(t=>{a.list=t}).catch(t=>{d.isError=!0,d.errorMsg=`${t.statusText}`,console.error(t)})});const V=t=>{a.rarity=t.value,c.current=1};function z(t){return h[t]?h[t]:t}function T(t){return g[t]?g[t]:t}return(t,s)=>{const m=n("va-alert"),p=n("va-input"),M=n("va-select"),S=n("va-progress-circle"),E=n("va-image"),_=n("va-chip"),L=n("va-pagination"),N=n("va-data-table"),B=n("va-backtop");return v(),k(C,null,{title:o(()=>[A]),default:o(()=>[d.isError?(v(),k(m,{key:0,color:"warning",title:d.errorMsg,icon:"info",class:"mb-4"},{default:o(()=>[O]),_:1},8,["title"])):(v(),U("div",R,[l("div",W,[l("div",$,[l("div",q,[l("div",G,[H,r(p,{class:"flex mb-2 md3",placeholder:"\u4E2D\u6587\u540D\u7A31\u95DC\u9375\u5B57\u641C\u5C0B...",modelValue:a.keyword,"onUpdate:modelValue":s[0]||(s[0]=e=>a.keyword=e)},null,8,["modelValue"])])]),l("div",I,[l("div",J,[r(M,{class:"mb-4",label:"\u7A00\u6709\u5EA6","onUpdate:modelValue":[V,s[1]||(s[1]=e=>a.rarity=e)],modelValue:a.rarity,options:a.options},null,8,["modelValue","options"])])])])]),l("div",K,[r(N,{striped:"","sticky-header":"",height:"500px",items:a.result,columns:x,"per-page":c.perSize,"current-page":c.current,filter:a.keyword},{"cell(image)":o(({value:e})=>[r(E,{src:e,style:{width:"70px"}},{loader:o(()=>[r(S,{indeterminate:""})]),_:2},1032,["src"])]),"cell(location)":o(({value:e})=>[i(u(T(e)),1)]),"cell(rarity)":o(({value:e})=>[i(u(z(e)),1)]),"cell(showTime)":o(({value:e})=>[r(_,{size:"small",outline:!e.length>0},{default:o(()=>[i(u(e.length>0?e:"\u6574\u5929\u90FD\u6709"),1)]),_:2},1032,["outline"])]),"cell(showNorth)":o(({value:e})=>[r(_,{size:"small",outline:!e.length>0},{default:o(()=>[i(u(b(w)(e)),1)]),_:2},1032,["outline"])]),"cell(showSouth)":o(({value:e})=>[r(_,{size:"small",outline:!e.length>0},{default:o(()=>[i(u(b(w)(e)),1)]),_:2},1032,["outline"])]),bodyAppend:o(()=>[l("tr",null,[l("td",P,[r(L,{modelValue:c.current,"onUpdate:modelValue":s[2]||(s[2]=e=>c.current=e),input:"",pages:c.total},null,8,["modelValue","pages"])])])]),_:1},8,["items","per-page","current-page","filter"]),r(B,{onClick:b(j)},null,8,["onClick"])])]))]),_:1})}}};export{et as default};
